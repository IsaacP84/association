<!DOCTYPE html>
<html>
    <head>
        <title> Association </title>
        <script src="lib/p5/p5.min.js"></script>
        <script src="lib/p5/p5.dom.min.js"></script>
        <script src="lib/p5/p5.sound.min.js"></script>
        <script src="lib/FileSaver.js"></script>
        <script>
            Element.prototype.remove = function() {
                this.parentElement.removeChild(this);
            }
        </script>
        <link rel="stylesheet" type="text/css" href="styles/style.css">
        <link rel="stylesheet" type="text/css" href="styles/play.css">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">

        <script src="scripts/AIThing.js"></script>

        <script src="scripts/main.js"></script>

<!--         <script src="assets/loadMemory.js"></script> -->
    </head>


    <body class="box">
        <div class="content header">
                <button onclick="window.open('home.html', '_self')">Home</button>
        <!--                 <button onclick="saveMemory()">Save</button> -->
                <button onclick="saveMemory(true)">Download</button>
        </div>
        
            
            
            
            
        


        <div id="Play" class="box part content">
            <div style="min-height:15%;">
                <div style="height:100%;">
                    <div id="playInput">
                        <p>Play a term.</p>
                        <input id="word4" class="words"></input><button onclick="playWord()">Submit</button>
                        <button onclick="playWord(true)">Quit</button>
                        <button onclick="report()">Report</button>
                        <br>
                    </div>
                    
<!--                     <br> -->
                    <div>
                        <p id="aiOut1"></p>
                        <p id="aiOut2"></p>
                    </div>

                    <div id="learn" style="display:none;">


                        <input id="word5" class="words"></input><br>
                        <input id="word6" class="words"></input><br>
                        <button onclick="teach()">Submit</button>
                    </div>
                </div>
    <!--             <button onclick="hideMemory()">Clear List</button> -->
                

                
            </div>
            <br>
            <div class="part content">

            </div>
            <br>
            <div class="part footer">
                <p id="wordCount"><p>
                <p>Rules:</p>
                <ol style="margin: 0px;">
                    <li>Use objective terms.</li>
                    <li>Refrain from using cuss words.</li>
                    <li>Use full names and not abbreviations.</li>
                </ol>

                
            </div>


        </div>
        <div class="content footer">
                <p class="noSelect"> Get a <b><a onclick="getRandomWord()" style="display:inline; color:gold;">random</a></b> term.</p>
                <p style="display:inline;" class="noSelect"> Term: <a id="getWordP" class="clickable noSelect" onclick="playWord(this.innerHTML)" style="display:inline; color:gold;"></a></p>
                <!--                 <p> Term: <a id="getWordP" class="clickable" onclick="getMemory(document.getElementById('getWordP').innerHTML)"></a></p> -->
                
                <br>
                <p id="learned" class="faded" class="noSelect">New associations will appear here.</p>
        </div>

        <script id="startupScript">
            let self = document.getElementById("startupScript");

            document.getElementById('word4').addEventListener('keydown', function(event) {
                if(event.keyCode == '13') {
                    playWord();
//                     this.blur();
                }
            });

            document.getElementById('word5').addEventListener('keydown', function(event) {
                if(event.keyCode == '13') {
                    document.getElementById('word6').focus();
                }
            });

            document.getElementById('word6').addEventListener('keydown', function(event) {
                if(event.keyCode == '13') {
                    teach();
                    if(document.getElementById('word5').value == '') {
//                         document.getElementById('word4').focus();
                    } else {
                        this.focus();
                    }
                    return;
                }
            });




            document.getElementById('file').addEventListener('change', function (evt) {
               let files = evt.target.files;
               let file = files[0];           
               let reader = new FileReader();
               reader.onload = function(event) {
                    let result = event.target.result;
                    ai.loadMemory(JSON.parse(result));           
               }
               let tempTxt = reader.readAsText(file);
//                console.log(tempTxt);
            }, false);

           

//             document.getElementById('terms').addEventListener('keydown', function(event) {
//                 if(event.keyCode == '13') {
//                     document.getElementById('word3').focus();
// //                     return;
//                     console.log('adhjl');
//                 }
//             });
            var updateTimer = setInterval(function() {
                let p = document.getElementById('wordCount');
                let count = ai.getAssociations().length;
                p.innerHTML = `Currently knows ${count} words!`;
            }, 1000);
            


            self.remove();
        </script>
    </body>
</html>